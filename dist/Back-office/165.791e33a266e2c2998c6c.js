"use strict";(self.webpackChunkback_office=self.webpackChunkback_office||[]).push([[165],{6165:(x,p,r)=>{r.r(p),r.d(p,{ContactModule:()=>O});var h=r(8583),g=r(4655),t=r(7716),a=r(3679),m=r(3190),C=r(1841),S=r(7518);let v=(()=>{class e{constructor(o,n){this.http=o,this.apiconfigService=n,this.form=new a.cw({object:new a.NI("",[a.kI.required]),text:new a.NI("",[a.kI.required]),email:new a.NI("",[a.kI.required,a.kI.email]),companyName:new a.NI("",[a.kI.required])})}getAllContacts(){return this.apiconfigService.getApiBasePath().pipe((0,m.w)(o=>this.http.get(`${o}/api/Contact`)))}getContactById(o){return this.apiconfigService.getApiBasePath().pipe((0,m.w)(n=>this.http.get(`${n}/${o}`)))}createContact(o){return this.apiconfigService.getApiBasePath().pipe((0,m.w)(n=>this.http.post(n,o)))}updateContact(o){return this.apiconfigService.getApiBasePath().pipe((0,m.w)(n=>this.http.put(`${n}/${o.contactId}`,o)))}deleteContact(o){return this.apiconfigService.getApiBasePath().pipe((0,m.w)(n=>this.http.delete(`${n}/${o}`)))}initializeFormGroup(){this.form.setValue({object:"",email:"",text:"",companyName:""})}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(C.eN),t.LFG(S.N))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var A=r(7001),d=r(8295),l=r(9983),u=r(6467),c=r(1095);const P=["ckeditor"];function f(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"this field is mandatory !."),t.qZA())}function I(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"Please enter a valid email address."),t.qZA())}function Z(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"this field is mandatory !."),t.qZA())}function U(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1,"this field is mandatory !."),t.qZA())}let M=(()=>{class e{constructor(o,n){this.contactService=o,this._snackBar=n,this.submitted=!1,this.config={toolbar:[{name:"document",items:["Source","-","NewPage","Preview","-","Templates"]},{name:"clipboard",items:["Cut","Copy","Paste","PasteText","PasteFromWord","-","Undo","Redo"]},{name:"editing",items:["Find","Replace","-","SelectAll"]},"/",{name:"basicstyles",items:["Bold","Italic","Underline","Strike","Subscript","Superscript","-","RemoveFormat"]},{name:"paragraph",items:["NumberedList","BulletedList","-","Outdent","Indent","-","Blockquote","CreateDiv","-","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock","-","BidiLtr","BidiRtl"]},{name:"links",items:["Link","Unlink","Anchor"]},{name:"insert",items:["Image","Table","HorizontalRule","SpecialChar"]},"/",{name:"styles",items:["Styles","Format","Font","FontSize"]},{name:"colors",items:["TextColor","BGColor"]},{name:"tools",items:["Maximize","ShowBlocks"]},{name:"others",items:["-"]}],width:"100%",removePlugins:"elementspath"}}ngOnInit(){}ngAfterViewInit(){this.ckeditor&&this.ckeditor.instance&&this.ckeditor.instance.setData("")}onSubmit(){let o={contactId:this.contactService.form.value.contactId,text:this.contactService.form.value.text,object:this.contactService.form.value.object,email:this.contactService.form.value.email,companyName:this.contactService.form.value.companyName,createdDate:new Date,lastModificatedDate:new Date};this.contactService.form.valid?this.contactService.createContact(o).subscribe(n=>{this.contactService.form.reset(),setTimeout(()=>{this.ckeditor&&this.ckeditor.instance&&(this.ckeditor.instance.setData(""),this.contactService.form.controls.text.setErrors(null),this.contactService.form.controls.text.markAsUntouched(),this.contactService.form.controls.text.markAsPristine())},0),Object.keys(this.contactService.form.controls).forEach(s=>{var y;"text"!==s&&(null===(y=this.contactService.form.get(s))||void 0===y||y.setErrors(null))}),this._snackBar.open(" Submited Successfully","0K\u26a1",{duration:8e3,horizontalPosition:"right",verticalPosition:"bottom",panelClass:["mat-toolbar","mat-success"]})}):this._snackBar.open("Please fill in all required fields","",{duration:4e3,horizontalPosition:"center",verticalPosition:"bottom",panelClass:["mat-toolbar","mat-warn"]})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(v),t.Y36(A.ux))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-add-contact"]],viewQuery:function(o,n){if(1&o&&t.Gf(P,5),2&o){let s;t.iGM(s=t.CRH())&&(n.ckeditor=s.first)}},decls:31,vars:7,consts:[[1,"container"],[1,"form-container"],[3,"formGroup","ngSubmit"],["appearance","outline"],["matInput","","formControlName","email","type","email","required",""],[4,"ngIf"],["matInput","","formControlName","companyName","required",""],["matInput","","formControlName","object","required",""],[1,"row"],["name","editor","formControlName","text",1,"ckeditor",3,"config","required"],["ckeditor",""],["mat-raised-button","","color","primary","type","submit"]],template:function(o,n){if(1&o&&(t._UZ(0,"br"),t._UZ(1,"br"),t.TgZ(2,"div",0),t._UZ(3,"br"),t._UZ(4,"br"),t._UZ(5,"br"),t.TgZ(6,"div",1),t.TgZ(7,"form",2),t.NdJ("ngSubmit",function(){return n.onSubmit(),n.submitted=!0}),t.TgZ(8,"mat-form-field",3),t.TgZ(9,"mat-label"),t._uU(10,"Email"),t.qZA(),t._UZ(11,"input",4),t.YNc(12,f,2,0,"mat-error",5),t.YNc(13,I,2,0,"mat-error",5),t.qZA(),t.TgZ(14,"mat-form-field",3),t.TgZ(15,"mat-label"),t._uU(16,"Company Name"),t.qZA(),t._UZ(17,"input",6),t.YNc(18,Z,2,0,"mat-error",5),t.qZA(),t.TgZ(19,"mat-form-field",3),t.TgZ(20,"mat-label"),t._uU(21,"Subject"),t.qZA(),t._UZ(22,"input",7),t.YNc(23,U,2,0,"mat-error",5),t.qZA(),t.TgZ(24,"div",8),t._UZ(25,"ckeditor",9,10),t.qZA(),t._UZ(27,"br"),t.TgZ(28,"div",1),t.TgZ(29,"button",11),t._uU(30,"Send"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&o){let s;t.xp6(7),t.Q6J("formGroup",n.contactService.form),t.xp6(5),t.Q6J("ngIf",null==n.contactService.form.controls.email.errors?null:n.contactService.form.controls.email.errors.required),t.xp6(1),t.Q6J("ngIf",null==(s=n.contactService.form.get("email"))?null:s.hasError("email")),t.xp6(5),t.Q6J("ngIf",null==n.contactService.form.controls.companyName.errors?null:n.contactService.form.controls.companyName.errors.required),t.xp6(5),t.Q6J("ngIf",null==n.contactService.form.controls.object.errors?null:n.contactService.form.controls.object.errors.required),t.xp6(2),t.Q6J("config",n.config)("required",!0)}},directives:[a._Y,a.JL,a.sg,d.KE,d.hX,l.Nt,a.Fj,a.JJ,a.u,a.Q7,h.O5,u.u,c.lW,d.TO],styles:["form[_ngcontent-%COMP%]{width:100%;max-width:600px;display:flex;flex-direction:column}mat-form-field[_ngcontent-%COMP%]{width:100%}.button-container[_ngcontent-%COMP%]{display:flex;justify-content:center}mat-toolbar[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;background-color:#f5f5f5;font-size:17px;font-weight:bold;border-bottom:2px solid #b5b2b2}@media (max-width: 768px){form[_ngcontent-%COMP%]{max-width:400px}}@media (max-width: 768px){mat-toolbar[_ngcontent-%COMP%]{flex-direction:column;height:auto;padding:20px;text-align:center}}@media screen and (max-width: 600px){mat-error[_ngcontent-%COMP%]{font-size:12px}}.ckeditor[_ngcontent-%COMP%]{width:100%}"]}),e})();var B=r(6640),b=r(6021);const T=[{path:"",component:M}];let E=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[g.Bz.forChild(T),u.d,b.q,a.u5,a.UX,B.A0],g.Bz,u.d,b.q,a.u5,a.UX,B.A0]}),e})(),O=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[h.ez,E]]}),e})()},7518:(x,p,r)=>{r.d(p,{N:()=>d});var h=r(6215),g=r(2298),t=r(5917),a=r(3342),m=r(8002),C=r(4612),S=r(5257),v=r(7716),A=r(1841);let d=(()=>{class l{constructor(c){this.http=c,this.apiBasePathLoaded=new h.X(!1),this.apiBasePathSubject=new g.t(1),this.storageKey="apiBaseUrl",this.loadApiBasePath().subscribe()}loadApiBasePath(){const c=localStorage.getItem(this.storageKey);return c?(this.apiBasePathSubject.next(c),this.apiBasePathLoaded.next(!0),(0,t.of)(!0)):this.http.get("assets/config.json").pipe((0,a.b)(P=>{const f=P.apiBaseUrl;if(!f)throw new Error("API base URL not found in config.json");localStorage.setItem(this.storageKey,f),this.apiBasePathSubject.next(f),this.apiBasePathLoaded.next(!0)}),(0,m.U)(()=>!0))}getApiBasePath(){return this.apiBasePathLoaded.pipe((0,C.b)(c=>{if(c)return this.apiBasePathSubject.pipe((0,S.q)(1));throw new Error("API base URL not loaded")}))}getApiBaseUrl(){return localStorage.getItem(this.storageKey)}}return l.\u0275fac=function(c){return new(c||l)(v.LFG(A.eN))},l.\u0275prov=v.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()}}]);