"use strict";(self.webpackChunkback_office=self.webpackChunkback_office||[]).push([[823],{4823:(xe,v,i)=>{i.r(v),i.d(v,{UsersModule:()=>ye});var m=i(8583),f=i(4655),s=i(3679),u=i(2238),h=i(9692),g=i(1494),l=i(2091),e=i(7716),Z=i(2413),A=i(7001),y=i(2522),C=i(1095),T=i(6627),d=i(8295),U=i(9983);function M(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Username is required. "),e.qZA())}function O(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Email is required. "),e.qZA())}function P(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Enter a valid adress. "),e.qZA())}function J(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Password must contain 8 characters,1 numeric, 1 upper case letter,1 special character$@$!%*?&. "),e.qZA())}function D(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Password must 8 characters,1 numeric,1 upper case letter,1 special character$@$!%*?&. "),e.qZA())}function L(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Confirm Password is Required "),e.qZA())}function Y(t,r){1&t&&(e.TgZ(0,"mat-error"),e._uU(1," Confirm Password did not match. "),e.qZA())}const w=function(t,r){return{"fa-eye-slash":t,"fa-eye":r}};let k=(()=>{class t{constructor(n,o,a,c){this.userService=n,this._snackBar=o,this.dialogRef=a,this.data=c,this.account=[],this.message="",this.submitted=!1,this.isSignUpFailed=!1,this.isSuccessful=!0,this.datasource=new l.by(this.account),this.accountData={}}ngOnInit(){this.datasource.sort=this.sort,this.datasource.paginator=this.paginator}onSubmit(){let n={username:this.userService.form.value.username,confirmPassword:this.userService.form.value.confirmPassword,password:this.userService.form.value.password,email:this.userService.form.value.email,createdDate:new Date,lastModifiedDate:new Date};this.userService.form.valid&&this.userService.createNewUser(n).subscribe(o=>{this.account.push(o),window.location.href="/admin/users",this.onClose()},o=>{if(o.error.message)return console.log(o.error.message,"******************"),void this._snackBar.open(o.error.message,"",{duration:4e3,horizontalPosition:"center",verticalPosition:"bottom",panelClass:["mat-toolbar","mat-warn"]})})}toggleFieldTextType(){this.fieldTextType=!this.fieldTextType}toggleFieldTextType2(){this.fieldTextType2=!this.fieldTextType2}onClose(){this.dialogRef.close()}onClear(){this.userService.initializeFormGroup()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(Z.K),e.Y36(A.ux),e.Y36(u.so),e.Y36(u.WI))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-add-user"]],viewQuery:function(n,o){if(1&n&&(e.Gf(h.NW,5),e.Gf(g.YE,5)),2&n){let a;e.iGM(a=e.CRH())&&(o.paginator=a.first),e.iGM(a=e.CRH())&&(o.sort=a.first)}},decls:51,vars:19,consts:[[1,"fill-remaining-space"],["mat-stroked-button","","tabIndex","-1",1,"btn-dialog-close",3,"click"],[1,"container"],[1,"col-md-12"],["name","form",3,"formGroup","submit"],[1,"row"],["appearance","outline"],["matInput","","name","username","formControlName","username","required","","placeholder","username"],[4,"ngIf"],["input","","matInput","","type","email","name","email","formControlName","email","required","","placeholder","email"],["matInput","","name","password","formControlName","password","required","","minlength","8","placeholder","password","pattern","^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[$@$!%*?&])[A-Za-z\\d$@$!%*?&].{8,}$",3,"type"],["matSuffix",""],[1,"fa",3,"ngClass","click"],["matInput","","name","confirmPassword","formControlName","confirmPassword","required","","minlength","8","placeholder","Confirm Password","pattern","^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[$@$!%*?&])[A-Za-z\\d$@$!%*?&].{8,}$",3,"type"],[1,"button-row"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["mat-raised-button","","mat-dialog-close",""],["mat-raised-button","",3,"click"]],template:function(n,o){1&n&&(e.TgZ(0,"mat-toolbar"),e.TgZ(1,"span"),e._uU(2,"Add Account"),e.qZA(),e._UZ(3,"span",0),e.TgZ(4,"button",1),e.NdJ("click",function(){return o.onClose()}),e.TgZ(5,"mat-icon"),e._uU(6,"clear"),e.qZA(),e.qZA(),e.qZA(),e._UZ(7,"br"),e._UZ(8,"br"),e.TgZ(9,"div",2),e.TgZ(10,"div",3),e.TgZ(11,"form",4),e.NdJ("submit",function(){return o.onSubmit()}),e.TgZ(12,"div",5),e.TgZ(13,"mat-form-field",6),e.TgZ(14,"mat-label"),e._uU(15," Username "),e.qZA(),e._UZ(16,"input",7),e.YNc(17,M,2,0,"mat-error",8),e.qZA(),e.TgZ(18,"mat-form-field",6),e.TgZ(19,"mat-label"),e._uU(20," Email "),e.qZA(),e._UZ(21,"input",9),e.YNc(22,O,2,0,"mat-error",8),e.YNc(23,P,2,0,"mat-error",8),e.qZA(),e.TgZ(24,"mat-form-field",6),e.TgZ(25,"mat-label"),e._uU(26," Password"),e.qZA(),e._UZ(27,"input",10),e.TgZ(28,"mat-icon",11),e.TgZ(29,"i",12),e.NdJ("click",function(){return o.toggleFieldTextType()}),e.qZA(),e.qZA(),e.YNc(30,J,2,0,"mat-error",8),e.YNc(31,D,2,0,"mat-error",8),e.qZA(),e.TgZ(32,"mat-form-field",6),e.TgZ(33,"mat-label"),e._uU(34," Confirm Password"),e.qZA(),e._UZ(35,"input",13),e.TgZ(36,"mat-icon",11),e.TgZ(37,"i",12),e.NdJ("click",function(){return o.toggleFieldTextType2()}),e.qZA(),e.qZA(),e.YNc(38,L,2,0,"mat-error",8),e.YNc(39,Y,2,0,"mat-error",8),e.qZA(),e.qZA(),e.TgZ(40,"div",14),e.TgZ(41,"button",15),e.TgZ(42,"mat-icon"),e._uU(43,"save"),e.qZA(),e._uU(44," Save "),e.qZA(),e.TgZ(45,"button",16),e.TgZ(46,"mat-icon"),e._uU(47,"close"),e.qZA(),e._uU(48,"Cancel "),e.qZA(),e.TgZ(49,"button",17),e.NdJ("click",function(){return o.onClear()}),e._uU(50,"Clear"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(11),e.Q6J("formGroup",o.userService.form),e.xp6(6),e.Q6J("ngIf",(o.userService.form.controls.username.touched||o.submitted)&&(null==o.userService.form.controls.username.errors?null:o.userService.form.controls.username.errors.required)),e.xp6(5),e.Q6J("ngIf",(o.userService.form.controls.email.touched||o.submitted)&&(null==o.userService.form.controls.email.errors?null:o.userService.form.controls.email.errors.required)),e.xp6(1),e.Q6J("ngIf",(null==o.userService.form.controls.email.errors?null:o.userService.form.controls.email.errors.email)||o.submitted),e.xp6(4),e.Q6J("type",o.fieldTextType?"text":"password"),e.xp6(2),e.Q6J("ngClass",e.WLB(13,w,!o.fieldTextType,o.fieldTextType)),e.xp6(1),e.Q6J("ngIf",(o.userService.form.controls.password.touched||o.submitted)&&(null==o.userService.form.controls.password.errors?null:o.userService.form.controls.password.errors.required)),e.xp6(1),e.Q6J("ngIf",(null==o.userService.form.controls.password.errors?null:o.userService.form.controls.password.errors.pattern)||o.submitted),e.xp6(4),e.Q6J("type",o.fieldTextType2?"text":"password"),e.xp6(2),e.Q6J("ngClass",e.WLB(16,w,!o.fieldTextType2,o.fieldTextType2)),e.xp6(1),e.Q6J("ngIf",o.userService.form.controls.confirmPassword.touched&&(null==o.userService.form.controls.confirmPassword.errors?null:o.userService.form.controls.confirmPassword.errors.required)),e.xp6(1),e.Q6J("ngIf",o.userService.form.controls.confirmPassword.value&&o.userService.form.controls.password.value!==o.userService.form.controls.confirmPassword.value),e.xp6(2),e.Q6J("disabled",o.userService.form.invalid))},directives:[y.Ye,C.lW,T.Hw,s._Y,s.JL,s.sg,d.KE,d.hX,U.Nt,s.Fj,s.JJ,s.u,s.Q7,m.O5,s.wO,s.c5,d.R9,m.mk,u.ZT,d.TO],styles:[".fill-remaining-space[_ngcontent-%COMP%]{flex:1 1 auto}.button-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:5px}.fill-remaining-space[_ngcontent-%COMP%]{flex:2 2 auto}.vap-icon[_ngcontent-%COMP%]{padding:0 10px}.mat-elevation-z5[_ngcontent-%COMP%]{position:relative;z-index:2}.full-width[_ngcontent-%COMP%]{margin-top:20px;width:100%}.mat-error[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-error[_ngcontent-%COMP%]{white-space:nowrap}"]}),t})();var Q=i(8259),_=i.n(Q),I=i(1573);let E=(()=>{class t{constructor(n,o,a,c,p,b){this.userService=n,this.router=o,this.token=a,this.cdr=c,this.dialogRef=p,this.data=b,this.roleSelected=null,this.account=[],this.selectedRole=0}ngOnInit(){}onSubmit(){const n=this.token.getUser();this.userService.updateUser(this.userService.form.value).subscribe(o=>{n.username=this.userService.form.value.username,sessionStorage.setItem("currentUser",JSON.stringify(n)),window.location.href="/admin/users"})}onClose(){this.dialogRef.close()}onClear(){this.userService.initializeFormGroup()}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(Z.K),e.Y36(f.F0),e.Y36(I.i),e.Y36(e.sBO),e.Y36(u.so),e.Y36(u.WI))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-edit-users"]],decls:32,vars:1,consts:[[1,"fill-remaining-space"],["mat-stroked-button","","tabIndex","-1",1,"btn-dialog-close",3,"click"],[1,"container"],[1,"col-md-12"],["name","form",3,"formGroup","submit"],[1,"row"],["appearance","outline"],["matInput","","type","text","name","username","formControlName","username","required","","placeholder","username","minlength","3","maxlength","20"],["matInput","","type","email","name","email","formControlName","email","required","","email","","placeholder","email"],[1,"button-row"],["mat-raised-button","","mat-dialog-close","","color","primary","type","submit"],["mat-raised-button","","mat-dialog-close",""],["mat-raised-button","",3,"click"]],template:function(n,o){1&n&&(e.TgZ(0,"mat-toolbar"),e.TgZ(1,"span"),e._uU(2," Update Account "),e.qZA(),e._UZ(3,"span",0),e.TgZ(4,"button",1),e.NdJ("click",function(){return o.onClose()}),e.TgZ(5,"mat-icon"),e._uU(6,"clear"),e.qZA(),e.qZA(),e.qZA(),e._UZ(7,"br"),e._UZ(8,"br"),e.TgZ(9,"div",2),e.TgZ(10,"div",3),e.TgZ(11,"form",4),e.NdJ("submit",function(){return o.onSubmit()}),e.TgZ(12,"div",5),e.TgZ(13,"mat-form-field",6),e.TgZ(14,"mat-label"),e._uU(15," Username "),e.qZA(),e._UZ(16,"input",7),e.qZA(),e.TgZ(17,"mat-form-field",6),e.TgZ(18,"mat-label"),e._uU(19," Email"),e.qZA(),e._UZ(20,"input",8),e.qZA(),e.qZA(),e.TgZ(21,"div",9),e.TgZ(22,"button",10),e.TgZ(23,"mat-icon"),e._uU(24,"save"),e.qZA(),e._uU(25," Save "),e.qZA(),e.TgZ(26,"button",11),e.TgZ(27,"mat-icon"),e._uU(28,"close"),e.qZA(),e._uU(29,"Cancel "),e.qZA(),e.TgZ(30,"button",12),e.NdJ("click",function(){return o.onClear()}),e._uU(31,"Clear"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(11),e.Q6J("formGroup",o.userService.form))},directives:[y.Ye,C.lW,T.Hw,s._Y,s.JL,s.sg,d.KE,d.hX,U.Nt,s.Fj,s.JJ,s.u,s.Q7,s.wO,s.nD,s.on,u.ZT],styles:[".fill-remaining-space[_ngcontent-%COMP%]{flex:1 1 auto}.button-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:5px}.fill-remaining-space[_ngcontent-%COMP%]{flex:2 2 auto}.vap-icon[_ngcontent-%COMP%]{padding:0 10px}.mat-elevation-z5[_ngcontent-%COMP%]{position:relative;z-index:2}.full-width[_ngcontent-%COMP%]{margin-top:20px;width:100%}"]}),t})();const F=[{display:"ACTIVE",value:"ACTIVE"},{display:"PENDING",value:"PENDING"},{display:"BLOCKED",value:"BLOCKED"}];let B=(()=>{class t{constructor(){}getDisplay(n,o){let a="";for(let c=0;c<o.length;c++)if(o[c].value==n){a=o[c].display;break}return a}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var x=i(171),z=i(7441),R=i(2458);function G(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){return e.CHM(n),e.oxw().onSearchClear()}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA(),e.qZA()}}function $(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"button",18),e.NdJ("click",function(){return e.CHM(n),e.oxw().onSearchClearuser()}),e.TgZ(1,"mat-icon"),e._uU(2,"close"),e.qZA(),e.qZA()}}function H(t,r){if(1&t&&(e.TgZ(0,"mat-option",19),e._uU(1),e.qZA()),2&t){const n=r.$implicit;e.Q6J("value",n.value),e.xp6(1),e.hij(" ",n.display," ")}}function j(t,r){1&t&&(e.TgZ(0,"mat-header-cell",38),e._uU(1,"Username "),e.qZA())}function K(t,r){if(1&t&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&t){const n=r.$implicit;e.xp6(1),e.hij("",n.username," ")}}function V(t,r){1&t&&(e.TgZ(0,"mat-header-cell",38),e._uU(1," Email "),e.qZA())}function W(t,r){if(1&t&&(e.TgZ(0,"mat-cell"),e.TgZ(1,"a",39),e._uU(2),e.qZA(),e.qZA()),2&t){const n=r.$implicit;e.xp6(1),e.MGl("href","mailto:",n.email,"",e.LSH),e.xp6(1),e.Oqu(n.email)}}function X(t,r){1&t&&(e.TgZ(0,"mat-header-cell",38),e._uU(1," Role "),e.qZA())}function ee(t,r){if(1&t&&(e.TgZ(0,"mat-cell"),e._uU(1),e.qZA()),2&t){const n=r.$implicit;e.xp6(1),e.hij(" ",n.level," ")}}function te(t,r){1&t&&(e.TgZ(0,"mat-header-cell",38),e._uU(1,"Status"),e.qZA())}const ne=function(){return{"font-size.px":13}},oe=function(t,r,n){return{"bg-success":t,"bg-warning":r,"bg-danger":n}};function re(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"mat-cell"),e.TgZ(1,"button",40),e.NdJ("click",function(){const c=e.CHM(n).$implicit;return e.oxw(2).updateaStatusAccount(c)}),e.TgZ(2,"span",41),e._uU(3),e.qZA(),e.qZA(),e.qZA()}if(2&t){const n=r.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("ngStyle",e.DdM(3,ne)),e.xp6(1),e.Q6J("ngClass",e.kEZ(4,oe,"ACTIVE"===n.userStatus,"PENDING"===n.userStatus,"BLOCKED"===n.userStatus)),e.xp6(1),e.hij(" ",o.dropdownService.getDisplay(n.userStatus,o.availableuserStatus)," ")}}function ae(t,r){1&t&&(e.TgZ(0,"mat-header-cell",38),e._uU(1," Created At"),e.qZA())}function se(t,r){if(1&t&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&t){const n=r.$implicit;e.xp6(1),e.hij("",e.xi3(2,1,n.createdDate,"dd/MM/yyyy HH:mm:ss")," ")}}function ie(t,r){1&t&&(e.TgZ(0,"mat-header-cell",38),e._uU(1," Last Modified At"),e.qZA())}function le(t,r){if(1&t&&(e.TgZ(0,"mat-cell"),e._uU(1),e.ALo(2,"date"),e.qZA()),2&t){const n=r.$implicit;e.xp6(1),e.hij("",e.xi3(2,1,n.lastModificatedDate,"dd/MM/yyyy HH:mm:ss")," ")}}function ce(t,r){1&t&&e._UZ(0,"mat-header-cell")}function ue(t,r){if(1&t){const n=e.EpF();e.TgZ(0,"mat-cell"),e.TgZ(1,"button",42),e.NdJ("click",function(){const c=e.CHM(n).$implicit;return e.oxw(2).onEdit(c)}),e.TgZ(2,"mat-icon"),e._uU(3,"update"),e.qZA(),e.qZA(),e._uU(4,"\xa0\xa0 "),e.TgZ(5,"button",42),e.NdJ("click",function(){const c=e.CHM(n).$implicit;return e.oxw(2).onDeleteUser(c.userId)}),e.TgZ(6,"mat-icon",43),e._uU(7,"delete_outline"),e.qZA(),e.qZA(),e.qZA()}}function me(t,r){1&t&&(e.TgZ(0,"mat-footer-cell",44),e._uU(1," Loading data.... "),e.qZA())}function de(t,r){1&t&&(e.TgZ(0,"mat-footer-cell",44),e._uU(1," NO data.... "),e.qZA())}function pe(t,r){1&t&&e._UZ(0,"mat-header-row")}function fe(t,r){1&t&&e._UZ(0,"mat-row")}const S=function(t){return{hide:t}};function _e(t,r){if(1&t&&e._UZ(0,"mat-footer-row",45),2&t){const n=e.oxw(2);e.Q6J("ngClass",e.VKq(1,S,null!=n.datasource))}}function ge(t,r){if(1&t&&e._UZ(0,"mat-footer-row",45),2&t){const n=e.oxw(2);e.Q6J("ngClass",e.VKq(1,S,!(null!=n.datasource&&0==n.datasource.data.length)))}}const he=function(){return["loading"]},Ze=function(){return["nodata"]};function Ce(t,r){if(1&t&&(e.ynx(0),e.TgZ(1,"table",20,21),e.ynx(3,22),e.YNc(4,j,2,0,"mat-header-cell",23),e.YNc(5,K,2,1,"mat-cell",24),e.BQk(),e.ynx(6,25),e.YNc(7,V,2,0,"mat-header-cell",23),e.YNc(8,W,3,2,"mat-cell",24),e.BQk(),e.ynx(9,26),e.YNc(10,X,2,0,"mat-header-cell",23),e.YNc(11,ee,2,1,"mat-cell",24),e.BQk(),e.ynx(12,27),e.YNc(13,te,2,0,"mat-header-cell",23),e.YNc(14,re,4,8,"mat-cell",24),e.BQk(),e.ynx(15,28),e.YNc(16,ae,2,0,"mat-header-cell",23),e.YNc(17,se,3,4,"mat-cell",24),e.BQk(),e.ynx(18,29),e.YNc(19,ie,2,0,"mat-header-cell",23),e.YNc(20,le,3,4,"mat-cell",24),e.BQk(),e.ynx(21,30),e.YNc(22,ce,1,0,"mat-header-cell",31),e.YNc(23,ue,8,0,"mat-cell",24),e.BQk(),e.ynx(24,32),e.YNc(25,me,2,0,"mat-footer-cell",33),e.BQk(),e.ynx(26,34),e.YNc(27,de,2,0,"mat-footer-cell",33),e.BQk(),e.YNc(28,pe,1,0,"mat-header-row",35),e.YNc(29,fe,1,0,"mat-row",36),e.YNc(30,_e,1,3,"mat-footer-row",37),e.YNc(31,ge,1,3,"mat-footer-row",37),e.qZA(),e._UZ(32,"br"),e.BQk()),2&t){const n=e.oxw();e.xp6(1),e.Q6J("dataSource",n.datasource),e.xp6(27),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns),e.xp6(1),e.Q6J("matFooterRowDef",e.DdM(5,he)),e.xp6(1),e.Q6J("matFooterRowDef",e.DdM(6,Ze))}}function Te(t,r){1&t&&(e.TgZ(0,"div",46),e._uU(1,"No data available"),e.qZA())}const Ue=function(){return[5,10,25,100]};let be=(()=>{class t{constructor(n,o,a,c,p,b,we){this.dialog=n,this._Snackbar=o,this.accountservice=a,this.route=c,this.router=p,this.dropdownService=b,this.dialogRef=we,this.showspinner=!1,this.nodata=!1,this.datasource=new l.by(this.account),this.displayedColumns=["username","email","level","userStatus","createdDate","lastModificatedDate","actions"],this.statusFilter=new s.NI(""),this.filterValues={userstatus:""},this.dataLoading=!0,this.availableuserStatus=F,this.id=this.route.snapshot.params.id,this.accountData={},this.datasource=this.datasource=new l.by(this.account)}ngOnInit(){this.mybreakpoint=window.innerWidth<=600?1:6,this.datasource.sort=this.sort,this.datasource.paginator=this.paginator,this.getAllUsers(),this.fieldListener()}ngAfterViewInit(){this.datasource.paginator=this.paginator,this.datasource.sort=this.sort}SearchUserByEmail(){""!==this.email.trim()?this.accountservice.searchUsersByEmail(this.email).subscribe(n=>{const o=Array.isArray(n)?n:[n];this.account=o,this.datasource.data=n,this.datasource=new l.by(this.account),this.datasource.paginator=this.paginator,this.datasource.sort=this.sort}):this.accountservice.GetallUsers().subscribe(n=>{this.account=n,this.datasource.data=n,this.datasource=new l.by(this.account),this.datasource.paginator=this.paginator,this.datasource.sort=this.sort}),null==this.data&&(this.datasource=new l.by(this.account))}onSearchClear(){this.email="",this.SearchUserByEmail()}SearchUserByUsername(){""!==this.username.trim()?this.accountservice.searchUsersByUsername(this.username).subscribe(n=>{const o=Array.isArray(n)?n:[n];this.account=o,this.datasource.data=n,this.datasource=new l.by(this.account),this.datasource.paginator=this.paginator,this.datasource.sort=this.sort}):this.accountservice.GetallUsers().subscribe(n=>{this.account=n,this.datasource.data=n,this.datasource=new l.by(this.account),this.datasource.paginator=this.paginator,this.datasource.sort=this.sort}),null==this.data&&(this.datasource=new l.by(this.account))}onSearchClearuser(){this.username="",this.SearchUserByUsername()}getAllUsers(){this.accountservice.GetallUsers().subscribe(n=>{if(Array.isArray(n)){const o=n.filter(a=>"admin"!==a.level);this.datasource=new l.by(o),this.datasource.paginator=this.paginator,this.datasource.sort=this.sort,this.datasource.filterPredicate=this.createFilter()}else console.error("Data is not an array")})}onDeleteUser(n){_().fire({title:"Are you sure to delete this User?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes",cancelButtonText:"No",cancelButtonColor:"gray"}).then(o=>{o.value&&(this.accountservice.deleteUser(n).subscribe(a=>{console.log(a),_(),this.getAllUsers()}),this._Snackbar.open(" Deleted Successfully","0K\u26a1",{duration:5e3,horizontalPosition:"right",verticalPosition:"bottom",panelClass:["mat-toolbar","mat-success"]}))})}onEdit(n){this.accountservice.populateForm(n),console.log("the row ===>",JSON.stringify(n));const o=new u.vA;o.disableClose=!0,o.autoFocus=!0,o.width="40%",o.data={userId:n.userId},this.dialog.open(E,o)}onClear(){this.accountservice.initializeFormGroup()}updateaStatusAccount(n){_().fire({title:"Are you sure to update status  !?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes.",cancelButtonText:"No."}).then(o=>{if(o.value){const a=this.datasource.data.indexOf(n);this.datasource.data[a].userStatus=this.changeStatut(this.datasource.data[a].userStatus),this.accountservice.UpdateUserStatut(this.datasource.data[a]).subscribe(c=>{console.log(c)}),_().fire("updated!"," status updated successfully.","success")}else _()})}onCreate(){this.accountservice.form.reset();const n=new u.vA;n.disableClose=!0,n.autoFocus=!0,n.width="40%",this.dialog.open(k,n)}changeStatut(n){return"ACTIVE"==n?"BLOCKED":"PENDING"==n?"ACTIVE":"PENDING"}fieldListener(){this.statusFilter.valueChanges.subscribe(n=>{this.filterValues.userStatus=n,this.datasource.filter=JSON.stringify(this.filterValues)})}createFilter(){return function(o,a){let c=JSON.parse(a);return-1!==o.userStatus.indexOf(c.userStatus)}}clearFilter(){this.statusFilter.setValue("")}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(u.uw),e.Y36(A.ux),e.Y36(Z.K),e.Y36(f.gz),e.Y36(f.F0),e.Y36(B),e.Y36(u.so))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-users-list"]],viewQuery:function(n,o){if(1&n&&(e.Gf(h.NW,5),e.Gf(g.YE,5)),2&n){let a;e.iGM(a=e.CRH())&&(o.paginator=a.first),e.iGM(a=e.CRH())&&(o.sort=a.first)}},decls:39,vars:11,consts:[["color","primary"],[1,"search-group"],["floatLabel","never",1,"search-form-field"],["matInput","","placeholder","Search by Email","autocomplete","on",3,"ngModel","ngModelChange","keyup"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],["matInput","","placeholder","Search by Username","autocomplete","on",3,"ngModel","ngModelChange","keyup"],[1,"no-label-field"],[3,"formControl"],["value",""],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"],["mat-fab","","color","gray",1,"float-right",3,"click"],[1,"card",2,"width","100%"],[1,"container"],[1,"table-responsive","table-border"],[4,"ngIf","ngIfElse"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],["noDataTemplate",""],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[3,"value"],["mat-table","","matSort","",3,"dataSource"],["table",""],["matColumnDef","username"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","email"],["matColumnDef","level"],["matColumnDef","userStatus"],["matColumnDef","createdDate"],["matColumnDef","lastModificatedDate"],["matColumnDef","actions"],[4,"matHeaderCellDef"],["matColumnDef","loading"],["colspan","6",4,"matFooterCellDef"],["matColumnDef","nodata"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"ngClass",4,"matFooterRowDef"],["mat-sort-header",""],[2,"text-decoration","none !important","color","black",3,"href"],["mat-icon-button","",1,"badge","bag-warning","mr-2",3,"ngStyle","click"],[1,"badge",3,"ngClass"],["mat-icon-button","",3,"click"],["color","warn"],["colspan","6"],[3,"ngClass"],[1,"mat-display-1"]],template:function(n,o){if(1&n&&(e._UZ(0,"br"),e._UZ(1,"br"),e.TgZ(2,"mat-expansion-panel"),e.TgZ(3,"mat-expansion-panel-header"),e.TgZ(4,"mat-icon",0),e._uU(5,"filter_alt"),e.qZA(),e._uU(6," Filter "),e.qZA(),e.TgZ(7,"div",1),e.TgZ(8,"mat-form-field",2),e.TgZ(9,"input",3),e.NdJ("ngModelChange",function(c){return o.email=c})("keyup",function(){return o.SearchUserByEmail()}),e.qZA(),e.YNc(10,G,3,0,"button",4),e.qZA(),e.TgZ(11,"mat-form-field",2),e.TgZ(12,"input",5),e.NdJ("ngModelChange",function(c){return o.username=c})("keyup",function(){return o.SearchUserByUsername()}),e.qZA(),e.YNc(13,$,3,0,"button",4),e.qZA(),e.TgZ(14,"mat-form-field",6),e.TgZ(15,"mat-select",7),e.TgZ(16,"mat-option",8),e._uU(17," Select a Status "),e.qZA(),e.YNc(18,H,2,2,"mat-option",9),e.qZA(),e.qZA(),e.TgZ(19,"button",10),e.NdJ("click",function(){return o.clearFilter()}),e._uU(20," Clear"),e.qZA(),e.qZA(),e.qZA(),e._UZ(21,"br"),e._UZ(22,"br"),e.TgZ(23,"div"),e.TgZ(24,"button",11),e.NdJ("click",function(){return o.onCreate()}),e.TgZ(25,"mat-icon"),e._uU(26,"add"),e.qZA(),e.qZA(),e.qZA(),e._UZ(27,"br"),e._UZ(28,"br"),e.TgZ(29,"div",12),e._UZ(30,"br"),e.TgZ(31,"div",13),e._UZ(32,"br"),e.TgZ(33,"div",14),e.YNc(34,Ce,33,7,"ng-container",15),e._UZ(35,"mat-paginator",16),e.YNc(36,Te,2,0,"ng-template",null,17,e.W1O),e.qZA(),e.qZA(),e._UZ(38,"br"),e.qZA()),2&n){const a=e.MAs(37);e.xp6(9),e.Q6J("ngModel",o.email),e.xp6(1),e.Q6J("ngIf",o.email),e.xp6(2),e.Q6J("ngModel",o.username),e.xp6(1),e.Q6J("ngIf",o.username),e.xp6(2),e.Q6J("formControl",o.statusFilter),e.xp6(3),e.Q6J("ngForOf",o.availableuserStatus),e.xp6(16),e.Q6J("ngIf",!o.nodata)("ngIfElse",a),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(10,Ue))("pageSize",5)}},directives:[x.ib,x.yz,T.Hw,d.KE,U.Nt,s.Fj,s.JJ,s.On,m.O5,z.gD,s.oH,R.ey,m.sg,C.lW,h.NW,d.R9,l.BZ,g.YE,l.w1,l.fO,l.Dz,l.mD,l.as,l.nj,l.Ke,l.ge,g.nU,l.ev,m.PC,m.mk,l.yh,l.XQ,l.Gk,l.Q2],pipes:[m.uU],styles:[".table-responsive[_ngcontent-%COMP%]{display:block;width:100%;overflow-x:auto}.mat-table[_ngcontent-%COMP%]{width:100%;max-width:60%;display:table;border-collapse:collapse;margin:0}.mat-row[_ngcontent-%COMP%], .mat-header-row[_ngcontent-%COMP%]{display:table-row}.mat-cell[_ngcontent-%COMP%], .mat-header-cell[_ngcontent-%COMP%]{word-wrap:initial;display:table-cell;padding:0 40px;line-break:unset;width:100%;white-space:nowrap;overflow:hidden;vertical-align:middle}.mat-footer-row[_ngcontent-%COMP%]   .mat-footer-cell[_ngcontent-%COMP%]{justify-content:center;font-style:italic}.fill-remaining-space[_ngcontent-%COMP%]{flex:1 1 auto}form.normal-form[_ngcontent-%COMP%]{margin:10px}.controles-container[_ngcontent-%COMP%]{width:100%;padding:5%}.controles-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}.add-bottom-padding[_ngcontent-%COMP%]{padding-bottom:10px}.button-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:5px}.fill-remaining-space[_ngcontent-%COMP%]{flex:2 2 auto}.vap-icon[_ngcontent-%COMP%]{padding:0 10px}.mat-elevation-z5[_ngcontent-%COMP%]{position:relative;z-index:2}.full-width[_ngcontent-%COMP%]{margin-top:20px;width:100%}.search-group[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap}.search-form-field[_ngcontent-%COMP%]{flex-basis:49%;margin-right:1%}.mat-form-field-wrapper[_ngcontent-%COMP%]{width:100%}"]}),t})();var q=i(6021),N=i(4897);const ve=[{path:"",component:be}];let Ae=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[f.Bz.forChild(ve),q.q,s.u5,s.UX,N.g],f.Bz,q.q,s.u5,s.UX,N.g]}),t})(),ye=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[m.ez,Ae]]}),t})()}}]);