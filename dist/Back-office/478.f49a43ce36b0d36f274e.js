"use strict";(self.webpackChunkback_office=self.webpackChunkback_office||[]).push([[478],{3478:(L,u,n)=>{n.r(u),n.d(u,{HistoryModule:()=>q});var d=n(8583),h=n(4655),g=n(9692),p=n(1494),i=n(2091),t=n(7716),y=n(2238),_=n(7001),C=n(3190),M=n(4945),c=n(5304),v=n(205),s=n(1841),x=n(7518);let f=(()=>{class e{constructor(o,r){this.http=o,this.apiconfigService=r,this.httpOptions={headers:new s.WM({"content-type":"application/json"})}}handleError(o){return o.error instanceof ErrorEvent?console.error("An Error occurred",o.error.message):console.error(`backend returned code ${o.status}, body was: ${o.error}`),(0,v._)("Something bad happened, please try again later.")}getAllLicenseHistory(){return this.apiconfigService.getApiBasePath().pipe((0,C.w)(o=>this.http.get(`${o}/api/LicenseHistory/gethistories`).pipe((0,M.X)(2),(0,c.K)(this.handleError))))}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(s.eN),t.LFG(x.N))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var P=n(8295),H=n(9983),m=n(3679),T=n(1095),w=n(6627);function U(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"button",23),t.NdJ("click",function(){return t.CHM(o),t.oxw().onSearchClear()}),t.TgZ(1,"mat-icon"),t._uU(2,"close"),t.qZA(),t.qZA()}}function A(e,a){1&e&&(t.TgZ(0,"mat-header-cell",24),t._uU(1,"Id"),t.qZA())}function D(e,a){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.hij(" ",o.licenseId," ")}}function b(e,a){1&e&&(t.TgZ(0,"mat-header-cell",24),t._uU(1,"End Date"),t.qZA())}function E(e,a){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,o.endDate,"dd-MM-yyyy HH:mm")," ")}}function B(e,a){1&e&&(t.TgZ(0,"mat-header-cell",24),t._uU(1,"Module Name"),t.qZA())}function S(e,a){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.hij("",o.access.modules," ")}}function N(e,a){1&e&&(t.TgZ(0,"mat-header-cell",24),t._uU(1," Role "),t.qZA())}function R(e,a){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.hij("",o.access.accessName," ")}}function I(e,a){1&e&&(t.TgZ(0,"mat-header-cell",24),t._uU(1,"Products"),t.qZA())}function j(e,a){if(1&e&&(t.TgZ(0,"mat-cell"),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.hij(" ",o.access.product," ")}}function Y(e,a){1&e&&(t.TgZ(0,"mat-footer-cell",25),t._uU(1," Loading data.... "),t.qZA())}function K(e,a){1&e&&(t.TgZ(0,"mat-footer-cell",25),t._uU(1," NO data.... "),t.qZA())}function Q(e,a){1&e&&t._UZ(0,"mat-header-row")}function F(e,a){1&e&&t._UZ(0,"mat-row")}const O=function(e){return{hide:e}};function J(e,a){if(1&e&&t._UZ(0,"mat-footer-row",26),2&e){const o=t.oxw();t.Q6J("ngClass",t.VKq(1,O,null!=o.datasource))}}function W(e,a){if(1&e&&t._UZ(0,"mat-footer-row",26),2&e){const o=t.oxw();t.Q6J("ngClass",t.VKq(1,O,!(null!=o.datasource&&0==o.datasource.data.length)))}}const z=function(){return["loading"]},G=function(){return["nodata"]},$=function(){return[5,10,25,100]};let X=(()=>{class e{constructor(o,r,l){this.dialog=o,this._Snackbar=r,this.licenseHistoryService=l,this.history=[],this.showspinner=!1,this.ModuleList=[],this.datasource=new i.by(this.history),this.displayedColumns=["licenseId","endDate","modules","product","accessName"]}ngOnInit(){this.mybreakpoint=window.innerWidth<=600?1:6,this.datasource.sort=this.sort,this.datasource.paginator=this.paginator,this.getAllLicensesHistory()}ngAfterViewInit(){this.datasource.paginator=this.paginator,this.datasource.sort=this.sort}getAllLicensesHistory(){this.licenseHistoryService.getAllLicenseHistory().subscribe(o=>{this.datasource.data=o})}onSearchClear(){this.searchKey="",this.applyFilter()}applyFilter(){this.datasource.filter=this.searchKey.trim().toLowerCase()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(y.uw),t.Y36(_.ux),t.Y36(f))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-list-history"]],viewQuery:function(o,r){if(1&o&&(t.Gf(g.NW,5),t.Gf(p.YE,5)),2&o){let l;t.iGM(l=t.CRH())&&(r.paginator=l.first),t.iGM(l=t.CRH())&&(r.sort=l.first)}},decls:44,vars:12,consts:[[1,"card",2,"width","100%"],[1,"container"],[1,"search-div"],["floatLabel","never",1,"search-form-field"],["matInput","","placeholder","Search","autocomplete","off",3,"ngModel","ngModelChange","keyup"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"table-responsive"],["mat-table","","matSort","",3,"dataSource"],["table",""],["matColumnDef","licenseId"],["mat-sort-header","",4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","endDate"],["matColumnDef","modules"],["matColumnDef","accessName"],["matColumnDef","product"],["matColumnDef","loading"],["colspan","6",4,"matFooterCellDef"],["matColumnDef","nodata"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[3,"ngClass",4,"matFooterRowDef"],["showFirstLastButtons","",3,"pageSizeOptions","pageSize"],["mat-button","","matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["mat-sort-header",""],["colspan","6"],[3,"ngClass"]],template:function(o,r){1&o&&(t._UZ(0,"br"),t._UZ(1,"br"),t._UZ(2,"br"),t._UZ(3,"br"),t._UZ(4,"br"),t._UZ(5,"br"),t.TgZ(6,"div",0),t._UZ(7,"br"),t.TgZ(8,"div",1),t.TgZ(9,"div",2),t.TgZ(10,"mat-form-field",3),t.TgZ(11,"input",4),t.NdJ("ngModelChange",function(tt){return r.searchKey=tt})("keyup",function(){return r.applyFilter()}),t.qZA(),t.YNc(12,U,3,0,"button",5),t.qZA(),t.qZA(),t._UZ(13,"br"),t._UZ(14,"br"),t.TgZ(15,"div",6),t.TgZ(16,"table",7,8),t.ynx(18,9),t.YNc(19,A,2,0,"mat-header-cell",10),t.YNc(20,D,2,1,"mat-cell",11),t.BQk(),t.ynx(21,12),t.YNc(22,b,2,0,"mat-header-cell",10),t.YNc(23,E,3,4,"mat-cell",11),t.BQk(),t.ynx(24,13),t.YNc(25,B,2,0,"mat-header-cell",10),t.YNc(26,S,2,1,"mat-cell",11),t.BQk(),t.ynx(27,14),t.YNc(28,N,2,0,"mat-header-cell",10),t.YNc(29,R,2,1,"mat-cell",11),t.BQk(),t.ynx(30,15),t.YNc(31,I,2,0,"mat-header-cell",10),t.YNc(32,j,2,1,"mat-cell",11),t.BQk(),t.ynx(33,16),t.YNc(34,Y,2,0,"mat-footer-cell",17),t.BQk(),t.ynx(35,18),t.YNc(36,K,2,0,"mat-footer-cell",17),t.BQk(),t.YNc(37,Q,1,0,"mat-header-row",19),t.YNc(38,F,1,0,"mat-row",20),t.YNc(39,J,1,3,"mat-footer-row",21),t.YNc(40,W,1,3,"mat-footer-row",21),t.qZA(),t._UZ(41,"br"),t._UZ(42,"mat-paginator",22),t.qZA(),t.qZA(),t.qZA(),t._UZ(43,"br")),2&o&&(t.xp6(11),t.Q6J("ngModel",r.searchKey),t.xp6(1),t.Q6J("ngIf",r.searchKey),t.xp6(4),t.Q6J("dataSource",r.datasource),t.xp6(21),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns),t.xp6(1),t.Q6J("matFooterRowDef",t.DdM(9,z)),t.xp6(1),t.Q6J("matFooterRowDef",t.DdM(10,G)),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(11,$))("pageSize",5))},directives:[P.KE,H.Nt,m.Fj,m.JJ,m.On,d.O5,i.BZ,p.YE,i.w1,i.fO,i.Dz,i.mD,i.as,i.nj,i.Ke,g.NW,T.lW,P.R9,w.Hw,i.ge,p.nU,i.ev,i.yh,i.XQ,i.Gk,i.Q2,d.mk],pipes:[d.uU],styles:[".table-responsive[_ngcontent-%COMP%]{display:block;width:100%;overflow-x:auto}.mat-table[_ngcontent-%COMP%]{width:100%;max-width:60%;display:table;border-collapse:collapse;margin:0}.mat-row[_ngcontent-%COMP%], .mat-header-row[_ngcontent-%COMP%]{display:table-row}.mat-cell[_ngcontent-%COMP%], .mat-header-cell[_ngcontent-%COMP%]{word-wrap:initial;display:table-cell;padding:0 26px;line-break:unset;width:100%;white-space:nowrap;overflow:hidden;vertical-align:middle}.mat-footer-row[_ngcontent-%COMP%]   .mat-footer-cell[_ngcontent-%COMP%]{justify-content:center;font-style:italic}.search-div[_ngcontent-%COMP%]{margin:10px}.search-form-field[_ngcontent-%COMP%]{width:60%;padding:5px 10px;background-color:#f0eded;border-radius:5px}.search-form-field[_ngcontent-%COMP%]   div.mat-form-field-underline[_ngcontent-%COMP%]{display:none}.search-form-field[_ngcontent-%COMP%]   div.mat-form-field-infix[_ngcontent-%COMP%]{border-top:0px}.search-form-field[_ngcontent-%COMP%]   div.mat-form-field-wrapper[_ngcontent-%COMP%]{padding-bottom:0}.search-form-field[_ngcontent-%COMP%]   div.mat-form-field-suffix[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:32px;width:32px}.fill-remaining-space[_ngcontent-%COMP%]{flex:1 1 auto}form.normal-form[_ngcontent-%COMP%]{margin:10px}.controles-container[_ngcontent-%COMP%]{width:100%;padding:5%}.controles-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}.add-bottom-padding[_ngcontent-%COMP%]{padding-bottom:10px}.button-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:5px}.fill-remaining-space[_ngcontent-%COMP%]{flex:2 2 auto}.vap-icon[_ngcontent-%COMP%]{padding:0 10px}.mat-elevation-z5[_ngcontent-%COMP%]{position:relative;z-index:2}.full-width[_ngcontent-%COMP%]{margin-top:20px;width:100%}@media (min-width: 768px){.card[_ngcontent-%COMP%]{max-width:100%;margin:0 auto}}@media (min-width: 992px){.table-responsive[_ngcontent-%COMP%]{overflow-x:auto}}"]}),e})();var Z=n(6021);const V=[{path:"",component:X}];let k=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[h.Bz.forChild(V),Z.q,m.u5,m.UX],h.Bz,Z.q,m.u5,m.UX]}),e})(),q=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[d.ez,k]]}),e})()},7518:(L,u,n)=>{n.d(u,{N:()=>M});var d=n(6215),h=n(2298),g=n(5917),p=n(3342),i=n(8002),t=n(4612),y=n(5257),_=n(7716),C=n(1841);let M=(()=>{class c{constructor(s){this.http=s,this.apiBasePathLoaded=new d.X(!1),this.apiBasePathSubject=new h.t(1),this.storageKey="apiBaseUrl",this.loadApiBasePath().subscribe()}loadApiBasePath(){const s=localStorage.getItem(this.storageKey);return s?(this.apiBasePathSubject.next(s),this.apiBasePathLoaded.next(!0),(0,g.of)(!0)):this.http.get("assets/config.json").pipe((0,p.b)(x=>{const f=x.apiBaseUrl;if(!f)throw new Error("API base URL not found in config.json");localStorage.setItem(this.storageKey,f),this.apiBasePathSubject.next(f),this.apiBasePathLoaded.next(!0)}),(0,i.U)(()=>!0))}getApiBasePath(){return this.apiBasePathLoaded.pipe((0,t.b)(s=>{if(s)return this.apiBasePathSubject.pipe((0,y.q)(1));throw new Error("API base URL not loaded")}))}getApiBaseUrl(){return localStorage.getItem(this.storageKey)}}return c.\u0275fac=function(s){return new(s||c)(_.LFG(C.eN))},c.\u0275prov=_.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),c})()}}]);